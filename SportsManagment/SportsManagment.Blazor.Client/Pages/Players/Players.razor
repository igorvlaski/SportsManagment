@page "/players"

<PageTitle>Vsi igralci</PageTitle>

@if (players != null && players.Any())
{
    <MudTable Items="players" Filter="FilterFunction">

        <ToolBarContent>
            <MudIconButton Icon="@Icons.Material.Outlined.Menu" Color="Color.Inherit" Class="mr-5" />
            <MudTooltip Text="Dodaj Igralca">
                <MudIconButton Icon="@Icons.Material.Outlined.Add" OnClick="@(() => GoToCreateAPlayer())" />
            </MudTooltip>
            <MudSpacer />
            <MudTextField @bind-Value="searchString" 
                          Placeholder="Poišči igralca" 
                          Adornment="Adornment.Start" 
                          AdornmentIcon="@Icons.Material.Filled.Search" 
                          IconSize="Size.Medium" 
                          Class="mt-0"
                          Style="margin-left: auto; width: auto; max-width: 50%;"></MudTextField>
        </ToolBarContent>
        <HeaderContent>
            <MudTh>
                <MudTooltip Text="Razvrsti po priimku" Arrow="true" Placement="Placement.Top">
                    <MudTableSortLabel SortBy="new Func<Player, object>(x=>x.LastName)">Ime in priimek</MudTableSortLabel>
                </MudTooltip>
            </MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<Player, object>(x=>x.DateOfBirth)">Datum rojstva</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<Player, object>(x=>x.Email)">Email</MudTableSortLabel></MudTh>
            <MudTh>Posodobi ali odstrani Igralca</MudTh>

        </HeaderContent>

        <RowTemplate>
            <MudTd DataLabel="Full Name">
                <MudButton OnClick="@(() => GoToPlayerDetails(context.Id))">@($"{context.FirstName} {context.LastName}")</MudButton>
                </MudTd>
                <MudTd DataLabel="Date Of Birth">@context.DateOfBirth</MudTd>
                <MudTd DataLabel="Email">@context.Email</MudTd>


                <MudTd>
                    <MudTooltip Text="Posodobi Igralca" Arrow="true" Placement="Placement.Top">
                        <MudIconButton OnClick="@(() => GoToEditPlayer(context.Id))" Icon="@Icons.Material.Filled.Edit"></MudIconButton>
                    </MudTooltip>
                    <MudTooltip Text="Odstrani igralca" Arrow="true" Placement="Placement.Top">
                        <MudIconButton Icon="@Icons.Material.Filled.Delete"
                                       OnClick="@(() => OpenDeleteConfirmationDialog(context.Id))"></MudIconButton>
                    </MudTooltip>
                </MudTd>
            </RowTemplate>
            <PagerContent>
                <MudTablePager />
            </PagerContent>
        </MudTable>
}
else
{
    <MudText Typo="Typo.body1">Loading players...</MudText>
}